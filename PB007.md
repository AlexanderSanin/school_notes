# PB007 Softwarové inženýrsví

## Vývoj softwaru
* klíčový je výběr věcí (programovacích jazyků, frameworků, knihoven,...), které využijeme

**cost-effective** -- důležité je, aby byl vývoj co nejlevnější v dlouhodobém horizontu

* **generický produkt** (krabicový SW) -- "one solution fits all", vývoj systémem *vodopád*
* **přizpůsobený produkt** -- konzultuji se zákazníkem a přizpůsobuji výrobek jeho potřebám
* **online prokudkty** -- trend současné doby, např. služby od Googlu

### Typy aplikací
* stand-alone desktop aplikace
* interaktivní webové aplikace
* embedded systémy -- vestavěné systémy (např. termoregulace domu)
* batch processing systémy -- dávkové zpracování dat (např. věrnostní nákupní karty)
* počítačové hry
* systémy pro modelování a simulaci
* sběr dat a monitorovací systémy
* systémy systémů

### Základní principy vývoje SW
* zvládnout a porozumět procesu vývoje
* spolehlivost a výkon
* specifikace a požadavky na SW (určí zákazník)
* využití exestujících zdrojů

### Proces aktivit při vývoji
1. specifikace požadavků
2. analýza a návrh
3. implementace
4. validace a verifikace
5. evoluce -- přidávání nových funkcionalit, redesign,...

### Modely vývoje
* **vodopád** -- každý tým řeší část a postupně si práci předávají až k finálnímu výsledku
* **RUP -- Rational Unified Process** -- složitá precizní iterativní metodika
* **agilní vývoj**

## Specifikace požadavků
* popis služeb a omezení se kterými systém pracuje a je vyvíjen

**funkční požadavek** -- jak by se systém měl chovat v určitých situacích (uživatel mámožnost exportovat mapu do PDF)

**nefunkční požadavek** -- kvalita systému (dobře, bezpečně, rychle, spolehlivě), splnění omezení (naprogramováno v Pythonu, je kompatibilní s..., umí běžet v cloudu, mělo by to být dostupné od ... do ...)

### Co požadujeme od specifikace požadavků
* kompletní -- jsou všechny
* konzistentní -- navzájem si neodporují
* přesné -- je jasné, co požadují
* verifikovatelné
* realné

### Proces
#### Sestavení požadavků
* existují seznamy otázek (check-listy), které vedou na objevení požadavků;
* metody: dotazník, rozhovor, workshop, dotazníkové šetření
* různé metody můžeme v různém pořadí kombinovat

#### Prioretizace a klasifikace
**MoSCoW kritéria** -- Must have, Should have, Could have, Want to have

**RUP atributy** (Rational Unified Process) -- Status, Benefit, Effort, Risk, Stability, Target Release

**agilní metodiky** -- pravidelné konzultace s klientem

#### Specifikace
* notace, kterou použiji pro zaznačení požadavků
* přirozený jazyk, strukturovaný jazyk (textová specifikace UML případů užití), grafická notace (UML diagramy), matematická specifikace (automaty)

#### Validace a verifikace
**A/B testování** -- implemetujeme dvě odlišné verze, obě nasadíme a měříme, která má lepší výsledky

### Nefunkční požadavky
#### Produktové požadavky (kvalita)
* spolehlivost (dependability)
    * **dostupnost** -- naplnění procentuálně určené dostupnosti; **MTTF** (mean time to failure) -- rozestup mezi výpadky, **MTTF** (mean time to repair) -- čas nutný na opravu
    * **spolehlivost** (reliability) -- pravděpodobnost, jestli dostanu správný nebo špatný výsledek; chyba uživatele, výjimka, chyba systému, slehání systému
    * **bezpečnost** (safe) -- možné ohrožení člověka nebo systémového prostředí
    * **zabezpečnost** (sacure) -- důvěrnost dat
* efektivita
    * **výkon**
    * **využití zdrojů**
* použitelnost
    * jednoduchost, intuitivita, jak se dá v systému zorientovat,...
* modifikovatelnost
    * dobrá modifikovatelnost může zabránit propagaci chyb
* testovatelnost

**externí kvalita** -- cena, bezpečnost, výkon,...

**interní kvalita** -- struktura, testovatelnost, pochopitelnost,...

#### Požadavky organizace (vnitřní předpisy)
* požadavky na vývoj
* požadavky prostředí
* operational environment -- platforma a systém, kde to bude běžet, životnost projektu,...

#### Externí požadavky
* např. legislativa

... 3. přednáška ...

## Objektově orientovaná analýza

**propojení** -- propojení mezi dvěma objekty pomocí reference na objekt nebo ukazatele

**asociace** -- vztah mezi dvěma třídami; může obsahovat popisek, šipku označující směr čtení, násobnosti vazby

### Násobnosti
'0..1' 
'1'
'0..*'
'1..*'
'1..6'

**hierarchie** -- každý objekt má právě jednoho nebo žádného předchůdce

**síť** -- každý obekt má libovolně mnoho předchůdců

**asociační třída** -- znázorňuje důležitou vazbu

### Závislosti
* usage -- jeden objekt používá jiný objekt
* abstraction -- abstrakce objektu
* permission -- definování práv

**stereotyp** -- význam šipky, který značím '<<use>>'

### Generalizace
* vztah mezi obecným a více specifickým elementem

### Dědičnost
* podtřída dědí všechny atributy, operace, vztahy, stereotypy, tagy a omezení ze své nadtřídy
* podtřída může přidat vlastní nové věci
* podtřída může přepsat věci z nadtřídy

### Abstrakce
**abstraktní třída** -- nelze instanciovat, slouží pouze jako kostra pro další třídy

### Polymorfismus
* koncept, že pokaždé najdu implementaci např. požadované operace

## Strukturová analýza
* rozklad na funkce
* model prostředí -> model chování + model dat
* model chování dekomponujeme na jednotlivé funkce

### Kontextový diagram
=  model prostředí (environmental model)
* skládá se z:
    * systém
    * terminátoři -- prvky komunikující zvenčí se systémem
    * přijímaná data
    * vytvářená data
    * datový zásobník

### Data flow diagram
= model chování (beavioral model), jakým způsobem putují data systémem
* skládá se z:
    * začátek
    * podprocesy

**shora dolů** (top-down) -- Co potřebuje zákazník? Postupně jdu do hloubky a zpřesňuji to. Mohou vznikat duplicity.

**zezdola nahoru** (bottom-up) -- Vymyslím spoustu funkcí a potom se je snažím spojovat. Mohou mi vzniknout nažádoucí celky.

### ERD diagram (Entity relation diagram)
* modelování entit (prvek systému) relací (vztahů mezi nimi)
* dva typy notace: Crow’s Foot (tabulky) a Chen's (čtverečky s bublinkami a kosočtverci)

#### Komponenty
* **atributy**
* **entity**
* **vztahy** -- 1:1, 1:N, M:N (vždy vede šipka od 1 k N a je možné, aby vztah byl mezi více než 2 entitami)

#### Proces tvorby databáze
1. **Určení účelu databáze.**
2. **Nalezení a organizace potřebných informací.** -- vyvoření ERD (typ entity = tabulka, atribut = sloupec, entita = řádek), převod vztahů, asociačních entit a M:N vztahů na jednoduché entity
3. **Specifikace primárních klíčů.**
4. **Převedení do normálních forem.**
5. **Vylepšení návrhu.** -- Odstranění chyb, ostestování na zkušebních datech, finální úprava návrhu...

#### Klíče
**superklíč** -- soubor atributů, který unikátně identifikuje každou entitu

**kandidátní klíč** -- neredundantní superklíč, každá část klíče je nezbytná pro unikátní identifikaci

**primární klíč** -- zvolený hlavní superklíč (značíme pomocí #)

**cizí klíč** -- soubor atributů jedidečně identifikujících cizí entitu

#### Normální formy
* slouží k minimalizaci redundance a závislostí
 
**update anomálie** -- informace je uložena na více místech, při updatu vzniká nekonzistence

**insertion anomálie** -- 

**deletion anomálie** -- 

##### 1. normální forma
* Atributy jsou atomické.
* např. ADRESA -> ULICE, ČÍSLO_POPISNÉ, MĚSTO, PSČ

##### 2. normální forma
* Je v 1. normální formě. Neobsahuje částečnou funkční závislost (žádný neklíčový atribut není závislý pouze na části primárního klíče) -- všechny funkční závislosti jsou úplné.

**funkční zásvislost** -- X je funkčně závislé na Y právě tehdy, když X jednoznačně identifikuje Y

**triviální funkční závislost** -- X je funkčně závislé na Y, pokud X ⊆ Y

**úplná funkční závislost** -- X je úplně funkčně závislé na Y, pokud X je funkčně závislé na Y a X není funkčně závislé na jiné podmnožině Y

##### 3. normální forma
* Je v 1. a 2. normální formě. Neobsahuje tranzitivní funkční závislosti.

## High-level design
* rozhodnutí, jakou taktiku zvolíme při návrhu softwaru
* nemůžeme optimalizovat vše najednou

### Spolehlivost a dostupnost
* **předcházení chybám** -- zaběhnutý proces vývoje, peer-reviews, QA inženýři, validace a verifikace
* **detekce chyb** -- monitoring, testy, ping/echo, heartbeat
* **tolerance chyb** -- tolerance chyb, aktivní/pasivné redundance, diverzita (různé implementace toho samého), výjimky, checkpoint/rollback, recovery možnost, volby (zvolí se neškodný výsledek)

### Bezpečnost
* **ochrana** -- Ztráta dat.
* **distribuce** -- Odhalení dat.
* ochrana: celé platformy, konkrétní aplikace nebo jednotlivých záznamů
* security policy, single point of failure, fail securely (pád neotevře zneužitelná dvířka), vyvážení bezpečnosti a použitelnosti, logování akcí uživatelů, využívat redundanci, povolit uživatelům přístup jen k věcem, které nutně potřebují, navrhnout systém tak, aby byl po selhání snadno obnovitelný, snadný deployment, validace vstupů
* schopnost zotavení -- např. odstřihnutí podezřelé aktivity

### Výkonnost
* na úrovni kódu (může snížit čitenost kódu) nebo na úrovni architektury systému
* např. cachování výsledků z databáze, souběžnost, zvýšení výpočetního výkonu

### Modifikovatelnost
* srozumitelnost kódu, samodokumnetovatelnost
* např. využití rozhraní, konfigurační soubory, polymorfismus, component replacement, dodržování protokolů

### Použitelnost
* využití kontextu činnosti, znalosti uživatele a předpokládaného chování systému
* např. uživatel očekává, že zavírací křížek bude pravo nahoře

## Low-level design a implementace
* klade důraz na čitelnost kódu, konkrétní konstrukty programovacích jazyků apod.

**návrhové vzory** -- znovupoužitelné abstraktní znalosti, tři kategorie: tvůrčí, strukturální, behavoriální

### Návrhové problémy
* **Observer pattern**
* **Façade pattern** -- zapouzdření části systému a delegování práce dovnitř
* **Adapter pattern** -- upraví výstup již naimplementovaných metod, aby vyhovoval požadavkům našeho rozhraní
* **Flyweight pattern**
* **Singleton pattern** -- jedna instance s globální přístupností

### SOLID principy
* **S**ingle responsibility -- každá třída má mít jen jednu funkcionalitu
* **O**pen/Closed -- otevřené k rozšiřování, ale uzavřené k modifikaci
* **L**iskov substitution -- musí být umožněno vystupování v roli rodiče (opice je vždy zvíře) 
* **I**nterface segregation -- mělo by být přítomno více rozhraní, která poskytují různé funcionality
* **D**ependency inversion -- závislost na abstrakci

### Coding principles
1. kontrola viditělnosti (private/public)
2. kontrola vstupů a výstupů
3. zodpovědnost za výjimky
4. chybové konstruky -- např. stejná jména pro více různých věcí
5. obnova po chybovém běhu
6. přetečení
7. timeout (především u externích služeb)
8. užívání konstant
9. výkonost
10. kontrolování efektivity zdrojů

### Problémy implementace
* **znovupoužití** -- objekty, komponenty, systém, abstrakce
* **konfikurační management** -- správa verzí, integrace systému, trackování problémů (bugs, issues)
* **variabilita zařízení**
* **správné technologie a nástroje**
* **velikost a komplexita kódu**
* **cloud, big data**
