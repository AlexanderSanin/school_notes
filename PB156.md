# PB156 Počítačové sítě

_ZKOUŠKA: 10-12 otázek, volné odpovědi, opravuje i konzultuje Hladká, bude předtermín + 6 řádných termínů_

_NAVAZUJÍCÍ: PV233 (Cisco Academy I.), PV234 (Cisco Academy II.), PV169, PV183_

> _"Víte, co je to hladká funkce?"_

## Úvod do světa počítačových sítí
### Úvod
**počítačová síť** -- skupina počítačů a zařízení propojená komunikačními kanály, které umožňují vzájemnou komunikaci a sdílení dat mezi uživateli

* využití: komunikace, sdílení HW, SW, souborů dat a informací
* základní vlastnosti sítě:
    * Delivery (správný příjemce)
    * Accuracy (správnost dat)
    * Timeliness (včas)

**sender** (odesílatel) -- zařízení zasílající datovou zprávu

**receiver** (příjemce) -- zařízení přijímající datovou zprávu

**message** (zpráva) -- informace, které je mezi odesílatelem a příjemcem vyměňovaná

**transmission medium** (přenosové médium) -- fyzické médium, skrze které je zpráva mezi odesílatelem a příjmcem přenesena

**protocol** (protokol) -- sada pravidel řídících komunikaci mezi zúčastněnými stranami

#### Parametry síťových toků:
* **brandwidth** (propustnost) -- udává kapacitu přenosového kanálu (bps, kbps, Mbps, Gbps...)
* **packet loss** (ztrátovost paketů) -- průměrný počet ztracených paketů za určité období vyjádření v % vzhledem k celkévmu počtu přensených paketů
* **delay, latency** (zpožnění přenosu) -- čas mezi odesláním a přijetím zprávy (ms)
    * **RTT delay (Round-Trip-Time delay)** -- čas trasy (odesílatel odešle -> příjemce přijme -> příjemce odešle -> odesílatel přijme)
* **jitter** (rozptyl, kolísání zpoždění) -- variabilita zpoždění přenosu (ms, μs...)

| Ideální síť              | Skutečná síť                             |
|--------------------------|------------------------------------------|
| transperentní            | vnitřní struktura ovlivňuje doručení dat |
| neomezená propustnost    | omezená propustnost                      |
| bezztrátová              | ztrátová                                 |
| bez zpoždění a jitteru   | zpoždění a jitter                        |
| zachování pořadí paketů  | možné prohození pořadí paketů            |
| data nejsou poškozena    | data mohou být poškozena                 |

#### Požadované vlastnosti
* efektivita (maximální využití zdrojů)
* spravedlivost (stejná priorita různých toků)
* decentralizovaná správa
* rychlá konvergence při adaptaci na nový stav
* spolehlivost
* řízení toku dat (aby nenastalo zahlcení sítě)

#### Základní přístupy
##### Spojované síťě (stavové)
* přepínání okruhů
* před začátkem komunikace je vytvořeno spojení (okruh) a to je udržováno po celou dobu komunikace
* pevný okruh × okruh vytvořený na přání
* slečny spojovatelky
* snadná implementace
* např. analogové telefonní sítě

##### Nespojované sítě
* přepínání paketů
* data nejdou po předem připravné cestě, ale jsou rozdělena do menších kousků a jednotlivé části sítě vybírají, kam paket pošlou dál (snaží se jej příblížit cíli)
* není potřeba uchovávat stav sítě
* složitější implementace
* např. Internet

#### Implementace fukcionality
##### End-to-End (E2E)
* není nutná kooperace vnitřních síťových prvků
* vše je v koncovch bodech sítě
* věrnost přenesených dat & zpoždění

##### Hop-by-Hop (HbH)
* funkcionalita se opakuje na každém uzlu sítě (rozhodování, kam data pošlu)
* prveky uvnitř sítě si pamatují její stav -> limitovaná škálovatelnost
* důležitější je minimalizovat zpoždění -> real-time systémy

### Síťové modely
* dekompozice úkolu (analogie s posíláním dopisu pošotu)

#### ISO/OSI model
* ISO = název organizace, OSI = název modelu
* 7-vrstvý model vytvořený pro zajištění kompatibility a interoperability komunikačních systémů různých výrobců
* každá vrstva plní určitou fukncionalitu
* každá vrstva komunikuje pouze se svými přímými sousedy
* vrstvy jsou pouze abstrakce funkcionality, implementace je jiná

**Fyzická vrstva** -- přenosový média, signály, bitová reprezentace (bity)

**Vrstva datového spoje** -- MAX a LLC, fyzická adresa (rámce)

**Síťová vrstva** -- logické síťové adresování, směrování (pakety)

**Transportní vrstva** -- proces-proces komunikace, spolehlivost (segmenty -- TCP, datagramy -- UDP)

**Relční vrstva** -- relace, správa relací (data)

**Prezentační vrstva** -- datová reprezentace (data)

**Aplikační vrstva** -- síťové aplikace (data)

![Rozdíl mezi ISO/OSI a TCP/IP](http://www.highteck.net/images/22-TCP-IP-ISO-OSI.jpg)

#### TCP/IP model
**Vrstva přístupu k síti/médiu**

**Síťová (Internetová) vrstva**

**Transportní vrstva**

**Aplikační vrstva**

### Síťové komunikační protokoly
* komunikace musí být nějak standardizovaná
* průběh komunikace:
    * výzva ke komunikaci
    * akceptace komunikace
    * akceptování/odmítnutí/timeout

**síťový protokol** -- definice formátu a pořadí zpráv vyměňovaných mezi entitami a akce probíhající při odesílání a příjmu, určuje syntax, sémantiku a časování (např. _UDP, TCP, IP, IPv6, SSL, TLS, SNMP, HTTP, FTP, SSH, Aloha, CSMA/CD,..._)

### Standardizace
* stanovení norem
* cíle: kvalita, bezpečnost, kompatibilita, interoperabilita, portabilita
* **de facto** -- obecně akceptovaná vhodná technická řešení
* **de jure** -- standardy nařízené kompetentními organizacemiautoritou

#### Standadizační instituce
* ANSI (American National Standards Institute)
* EIA (Electronics Industry Assiciation) -- normalizace na úrovni fyzické vrstvy
* IEC (International Electrotechnical Commission)
* IEEE (Institute of Electrical and Electrionic Engineers)
* IETF (Internet Engineering Task Force) -- příprava specifikací pro Interner
    * **RFC** (Request for Comments)
* ISO (International Organization for Standardiation)
* ITU-T (International Telecommunications Union - Telecommunications Standardization Sector)

### Přílkady reálných sítí
* CESNET2
* GEANT2
* Internet2/Abilene

## Fyzická vrstva
* řídí děje v přenosovém médiu
* poskytuje služby vrstvě datového spoje
* trasformuje bity na signály a naopak
* určuje počet logických kanálů souběžně přenášejících data z různých zdrojů
* **cíl**: přenést bity (obsah rámců) mezi odesílatelem a příjemcem
* vlastnosti (parametry a návaznosti signálů, zapojení konektorů apod.) jsou určeny standardy

**přenosové médium** -- přenáší data mezi uzly
* **analogivé přenosové médium** -- éter
* **digitální přenosové médium** -- koaxiál, kroucená dvojlinka

### Služby
* **Bit-to-Signal Trasformation** -- převod bitů na signál
* **Bit-Rate Control** -- kontrola početu bitů za sekundu
* **Bit Synchronization** -- synchronizace přijemece a odesílatele
* **Multiplexing** -- rozdělení na logické kanály za účelem vyšší efektivity
* **Circuit Switching** -- přepínání okruhů

### Signály
* data jsou přenášena pomocí (elektromagnetických) signálů
* je nutné provést převod binárních dat na signál

**signál** -- časová funkce reprezentující změny fyzikálních vlastností přenosového média
* **analogový signál** -- spojitý v čase, šíření po vodiči nebo bezdrátově
* **digitální signál** -- diskrétní (nespojitý) v čase, šíří se pouze po vodiči

#### Defekty signálů
* **slábnutí** -- ztráta energie, příčina: odpor vodiče
* **zkreslení** -- ztráta tvaru, příčina: různá rychlost šíření signálů na různých frekvencích
* **šum** -- příšina: vliv cizí energie

### Přenos dat
#### Analogový přenos binárních dat
* modulace
* amplitudová, frekvenční nebo fázová modulace
* **modem** = MOdulátor + DEModulátor

#### Digitální přenos binárních dat
* transformace kódování
* kódování -- binární data -> digitální signál
* problém: synchronizace vysílače a přijímače (nerozeznáme počet 1 v dlouhé posloupnosti 111...)

**přímé kódování** -- 0 je 0, 1 je 1, bez možnosti synchronizace

**NRZ kódování** -- dva signály, jeden přenáší data a druhý mění amplitudu pokud následující bit == 1

**kódování Manchester** -- pokles amplitudy == 0, nárůst amplitudy == 1, nižší efektivní přenosová kapacita, plná samosynchronizovatelnost

**kódování 4B/5B** -- uměle zavedená redundance, umí detekovat chyby

### Přenosová média
* prostředí pro činnost fyzické vrstvy
* **voděná** -- fyzický kanál mezi dvěmi zařízeními (kroucená dvojlinka, koaxiál, optické vlákno...)
* **nevoděná** -- nepoužívají fyzický vodič, signály se šíří éterem (rádiové, mikrovlnné či infračervené vysílání...)

#### Multiplexning
* technika sdílení dostupné přenosové kapacity přenosového média souběžnými kominikacemi
* lze uplatnit především u optických a bezdrátových přenosů
* pro analogové signály:
    * **Frequency-Division Multiplexing (FDM)** -- stanice vysílající v éteru na různých frekvencích
    * **Wave-Division Multiplexing (WDM)** -- FDM pro optická vlákna, různé vlnové délky (každá barva reprezentuje jeden kanál)
* pro digitální signály:
    * **Time-Division Multiplexing (TDM)** -- v jeden okamžik vysílá pouze jeden vysílač, střídají se, nutno dobře synchronizovat

## Linková vrstva (vstva datového spoje)
* na úrovni LAN
* přijímá pakety do síťové vrstvy a transformuje je do rámců
* přenáší rámce mezi komunikujícími uzly, které jsou určeny MAX adresami
* zaručuje spolehlivost přenosu (vynucení opakování chybně přenesené informace)
* brání zahlcení cílového uzlu
* řídí přístup uzlů k sdílenému přenosovému médiu
* detekuje a opravuje chyby
    * Error Detection, Automatic Request dor Retranstimission (ARQ)
    * Forward Error Correction (FEC)
* kolizní domána

### Služby
* **tvorba rámců** (Framing) -- balení paketů ze síťové vrstvy do rámců
* **adresování** (Addressing) -- fyzické/MAC adresy
* **chybové řízení** (Error Control) -- detekce a korekce chyb z fyzické vrstvy
* **řízení toku** (Flow Control) -- zabraňuje zahlcení příjemce (strop-and-wait, sliding-window)
* **řízení přístupu k médiu** (Medium Access Control - MAC) -- eliminace kolizí při násobném vysílání

### Tvorba rámců, adresace
* Ethernetový rámec:
    * preambule (identifikace počátku rámce)
    * cílová adresa
    * zdrojová adresa
    * typ
    * data
    * CRC (cyklický redundantní součet)

### Chybové řízení
* chyby (změna hodnot bitů) vznikají na fyzické vrstvě
* na linkové vrstvě probíhá detekce a korekce
* vysílač přidá rendundantní kontrolní bity, přijímat podle nich zkontroluje data
* **Error Detection, Automatic Request for Retransmission (ARQ)** -- detekce & opakování přenosu
* **Forward Error Correction (FEC)** -- detekce & oprava (např. Hammingův kód)

#### Kódy pro detekci chyb
* sudá/lichá parita
* cyklické kódy s kontrolní redundancí (CRC - Cyclic Redundancy Check) -- viz MB104 (n,k)-kódy

### Řízení přístupu k médiu (MAC)
* cíl: eliminovat kolize
* neřízený, řízený nebo multiplexově-orientovaný přístup

#### MAC protokoly neřízeného přístupu
* **Aloha** -- stanice vysílá kdykoli má připravený rámec, při kolizi počká náhodou dobu a pak to zkusí znovu, neefektivní
* **CSMA/CD** -- vysílá jen když je klid, používá se v LAN Ethernetu, nelte použít v nevoděném médiu
* **CSMA/CA** -- obcházení kolizí, použitelné v nevoděném médiu

#### MAC protokoly řízeného přístupu
* stanice smí vysílat pouze když szíská svolení
* **rezervace**
* **vyzývání**
* **předávání příznaku**

### L2 sítě
* lokální počítačové sítě (LANs)

**topologie** -- uspořádání stanic na médiu

**kolizní doména** -- určena stanicemi, které sdílí přenosové médium, při souběžném vysílání nastává kolize

#### Sběrnicová topologie (bus)
* relativně snadná na instlaci
* kolizní doména zahrnuje všechny připojené stanice
* protokol CSMA/CD pro řízení přístupu k médiu
* při výpadku kabelu vypadne celá síť

#### Kruhová topologie (ring)
* zprávy putují v jednom směru
* kolizní doména zahrnuje všechny připojené stanice
* právo vysílat se určuje metodou peška
* při výpadku kabelu nebo stanice vypadne celá síť

#### Hvězdicová topologie (star)
* centrální bod (hub, bridge, switch)
* obtížnější na instalaci
* kolizní doména závisí na propojovacím bodu
    * hub (L1) -- všechny připojené stanice
    * bridgle, switch (L2) -- pouze sousedící stanice
* při výpadku kabelu vypadne pouze dané zařízení

#### Budování L2 sítí
**bridge** (můstek) -- transperentní propojení sítí, zabraňuje šíření kolizí, všechen provoz prochází můstkem
* **switch** -- víceportový můstek

* založena na MAC adresách
* můstek se učí umístění jednotlivých stanic (Backward Learning Algorithm) -- nutné pro správné přepínání rámců

##### Distribuovaný Spanning Tree Algorithm
* cíl: zabránit cyklům (nepoužívat některé porty můstků)
* všechny můstky periodicky posílají informaci o své vzdálenosti od kořene
* pokud můstek obdrží zprávu od souseda, upraví svoji definici nejlepší cesty (kořen s menší adresou, menší vzdálenost)
* **výběr kořenového můstku**
    * všechny můstky se prohlásí za kořeny
    * rozešlou informace a vyberou ten s nejnižším ID
* **výběr kořenových portů**
    * každý můstek si vybere svůj nejkratší port ke kořenovému můstku
    * ostaní porty vypne
* **výběr aktivních/neaktivních portů**
    * kořenový můstek nastaví všechny své porty jako aktivní
    * na spojích, kde nejsou kořenové porty se vyměňují informace
    * ten s nižším můstkovým ID se vypne    

## Síťová vrstva

## Směrování
* faktory: statické vs. dynamické

## Transportní vrstva

## Kvalita služby

## Relační vrstva

## Prezentační vrstva

## Aplikační vrstva

## Základy síťové bezpečnosti

## Samoorganizující se sítě
### P2P sítě
### Ad-hoc sítě

### Bezdrátové ad-hoc sítě
* využití při živelných pohromách
* bez vnitřní ifrastruktury
* obtížněji napadnutelné (díky decentralizaci)
* omezený dosah

### Bezdrátové senzorové sítě
* malá zařízení, málo paměti, málo energie...
* záchranné akce - sledování teploty okolí (proti požárům v odlehlých částech lesů)

## Historie komunikačních sítí

---

### IPv6 adresy
* n-bitů: globální směrovací systém
* 64-n bitů: adresa podsítě
* 64 bitů: adresa rozhraní
* typy adres: unicast, multicast, anycast
* IP datagram
* ARP (Adress Resolution Protocoll) -- slouží k mapování dynamických aderes v IPv4
* _na zkoušece bývá:_ porovnání IPv4 a IPv6 hlaviček
