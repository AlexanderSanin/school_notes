# PV062 Organizace souborů

_1,5 hodiny, písemná zkouška, bez pomůcek, 6 příkladů (z toho 3 početní, 3 koncepčního typu), max. 12 bodů, na E alespoň 6 bodů_

## Informační teorie

**informace** -- získaná fakta o něčem nebo o někom, snižuje míru entropie

**zpráva** -- sdělení o nějakém objektu, události, jevu..., obsahuje informace

**nosič** -- médium, které slouží k přenosu a uchovávání informace, informace je na něm nějak zakódovaná

**signál** -- fyzikální veličina uchovávající informaci ve svých proměnnách v čase

**informační teorie** -- Claude E. Shannon

### Kvalita a kvantita informace

**syntax** -- sklabda, forma, uspořádání, kvantitativní (informační teorie)

**sémantika** -- obsah, význam, kvalitativní chápání (SW inženýrství)

### Míra množství informace ve zprávě

* množství informace souvisí s pravděpodobnosti jejího výskytu
* míra množství informace -- nejvhodnější řešení `f{x} = −log(x)`, musí mít aditivní charakter (pravděpodobnosti sčítáme)
* ASCII je velmi redundantní kódování, ale zato se s ním snadno manipuluje
* množství informace je vždy kladné
* méně pravděpodobná zpráva nese větší množství informace
* informace ze skupiny různých zpráv = součet informací z jednotlivých zpráv
* míra je spojitá a symetrická
* entropie má maximum když jsou všechny výstupy stejně pravděpodobné
* množství entropie odpovídá množství informace
* entropie roste s počtem možností
* minimální kódování: _Fanovo kódování_ -- kódy znaky mají délky úměrné množství informace, které nesou (častější znak je zakódován krátce), oddělovače nejsou potřeba

### Diskrétní zpráva, analogová zpráva
*   zpracování -- srozumitelné pro funkce a procedury
*   sdělování -- srozumitelnost
*   skladování -- minimalizace redundance
*   přenos -- minimalizace redundance & samoopravitelnost

* statické (př. text) × dynamické (př. zvuk) informace

### Kódování
* zpráva je tvořena symboly zdrojové abecedy
* kódování je proces přiřazování symbolům (nebo skupinám symbolů) zprávy symboly z cílové (kódovací) abecedy
* zpráva musí jít zase rozkódovat a výše zmíněná přiřezení musí být unikátní
* cílem je kódovat s co nejnižším nárokem na paměť

#### Kód
* trojce: kódovací abeceda, vstupní abeceda, výstupní abeceda
* kód s kódovými slovy pevné nebo proměnné délky
* kód by měl být jednoznačně dekódovatelný
* **stupeň** -- průměrný počet bitů kódových znaků
* třídy nesingulárních kódů: prefixové, sufixové a blokové (ty mají pevnou délku)
* prefixový ⊂ jednoznačně dekódovatelný ⊂ nesingulární

**Kraftova nerovnost** -- abeceda _q_-árního kódu obsahuje _q_ znaků, Suma všech záporně vzatých mocnin _q_ je menší rovno 1.

**McMillanova věta** -- Kraftova věta platí pro libovolné jednoznačně dekódovatelné kódování.

##### Unární kód
* C(1) = 1
* C(2) = 01
* C(3) = 001
* ...

##### Binární kód
* musíme použít oddělovače nebo určit pevnou délku slova

##### Eliasovy kódy
* univerzální kód pro kladná celá čísla
* N nul + první binární jednička + zbytek binárního čísla s délkou N

## Komprimace
= proces identifikace a odstraňování redundance
* ztrátová × bezztrátová komprimace
* kompresní a dekompresní algoritmus
* **kompresní poměr** (zakódovaná/původní)
* **kompresní faktor** (původní/zakódovaná)
* kompresní zisk, redundance zprávy, redundance komprimované zprávy
* **hodnotící metody kompresních algoritmů**: algoritmická složitost, paměťová složitost, kompresní poměr, míra ztrátovosti
* **metodika kompresních technik**: 
    1. modelování (hledání redundance)
    2. kódování
* **fyzická** (logika na úrovni bitů) vs. **logická** (logika na úrovni typu dat) komprese

* **statická komprese** -- neadaptivní, vždy použije stejný postup, nehledě na význam dat
* **adaptivní komprese** -- využívá význam komprimovaných dat

**prefixový kód** -- žádný kód slova nemá prefix takový, že by to byl kód jiného slova

**model** -- vyjádření zprávy pro její rozpoznávání a generování

### Modelovací techniky
* **statistické (nahrazení za kratší)
* slovníkové metody (seznam často se opakujícího)
* predikativní kódování

### Ztrátová komprese
* GSM (kódování řeči), MP3 (kódování zvuku), JPEG (kódování obrazu), DVD (kódování videa)

### Statistické modely konečného kontextu
* **statistický model nultého stupně** -- pravděpodobnosti výskytu znaků jsou stejné
* **statistický model prvního stupně** -- pravděpodobnosti výskytu znaků jsou různé
* **statistický model druhého stupně** -- pravděpodobnosti výskytu dvojic znaků

### Základní techniky komprimace
* **Braillovo písmo**
* **Baudotův kód** -- dvě kódová slova slouží k rozlišení, zda se jedná o písmeno nebo číslo
* **Ad-hoc textové komrese** -- vynechání mezer, ASCII
* **Slovníková přední komprese** -- opakování prefixů (_víno_ bílé, _víno_ červené, _víno_ růžové)
* **MacWrite** -- symbol = slabika, některé paragrafy kódovány nebo ne (podle toho, jestli je komprimovaná verze kratší)
* **RLE** (Run Length Encodings) -- opakujííc se znak -> znak + počet opakování (MNP)
    * **MNP class 5** -- inflight coding - statistika výskytu znaků, častá slova probublávají nahoru na kratší kódy
* **BinHex 4.0 Format** -- RLE + kódování do textové formy
* Move to Front Coding (Bentey kódování) -- upravuji tabulku, lokální adaptivita

### Statistické metody komprimace

#### Morseova abeceda

#### Shannon-Finnovo kódování
* bázový princip - shora dolů

#### Huffmanovo kódování a adaptivní podobě
* bázový princip zhora zdola nahoru
* není jednoznačné
* algoritmus FGK
* Huffmanův (binární) strom - postupné budování
* sourozenecká vlastnost: každý uzel kromě kořene stromu má sourozence, lze to uspořádat podle vah, aby byli vedle sebe

#### Aritmetické kódování
* kódový slova na intervalu `<0,1)`

### Slovníkové metody komprimace
* kódujeme řetězce
* LZ77 -- používá WinZip, Leupel-Ziv, okno
* LZ78 -- kódovací (vyhledávací) strom
* VZW -- GIF, TIFF, PDF
* VZSS - Leupel-Ziv-Storer-Szymanski

## Vnější paměti
### Sekundární paměti
#### Magnetický disk
* stopy > sektory
* doba vystavení
* rotační zpoždění
* řadič disku, řídící jednotka disku
* postupy vystavení: FIFO, Shortest Seek Time First, výtah (SCAN), jednosměrný výtah (C-SCAN)

##### RAID
= organizace diskového pole tak, aby působila jako jeden disk

* RAID 0 -- žádná redundance
* RAID 1 -- zrcadlení
* RAID 2 -- sebeopravující kódy
* RAID 3 -- parita
* RAID 4 -- disk na víc, který kontroluje paritu napříč ostatními disky ("po řádcích")
* RAID 5 -- jako předchozí, ale každý disk má kontrolu parity pro jeden řádek ("diagonála")

#### SSD
* tiché, rychlejší, bytelnější, omezená životnost

### Terciální paměti

#### Magnetooptický disk
* magnet + laser

#### Optický disk
* bez magnetismu
* využívá se u přepisovatelných CD a DVD

#### CD/DVD
* -ROM: Read Only Memory
* -R: Recordable
* -RW: ReWritable 

#### Pásky
* levnější, pomalejší, větší kapacita
* vhodné pro archivaci

**bandwidt** -- šířka pásma (koli můžeme přenést naráz)

**latence** -- zpoždění při přístupu

**Hierarchical Storage Management** (HSM) -- zahrnuje i terciální paměti, v superpočítačových centrech

## Soubor, souborové organizace

### Sobour

**databáze** - kolekce souvisejících dat

**soubor** -- logicky související kolekce údajů, se kterou se dá manipulovat
* **statické soubory** -- vnitřní struktura se nemění
* **dynamické soubory** -- vnitřní struktura se mění

**záznam** -- jeho obsah je specifikován atributy, podle atributů fixní × proměnná délka
* **logický záznam** -- kolekce hodnot atributů tvořící záznam
* **fyzická záznam** -- logický záznam + oddělovače, definice délek,...

**atribut** -- proměnná × fixní délka (oddělovač), projemnovaný × nepojmenovaný

**homogenní soubory** -- jednotná deklarovaná struktura, liší se hodnotami atributů

**blok** -- manipulační jednotka dat

**primární klíč**, **sekundární klíč**

**logická stránka**, **fyzická stránka** -- alokační blok

**implementační schema** -- optimální využití diskového prostoru (související data by měla být umístěna na stejném válci apod.)

#### Služby operující se soubory
* create
* delete
* open
* close
* read
* write
* dir

### Druhy organizace souborů

#### Hromada (heap)
* nehomogenní soubor
* obsahuje záznamy proměnné struktury
* nutnost použít oddělovače

#### Sekvenční soubor
* O(n), uspořádaný O(log n)
* homogenní
* klíč

#### Indexovaný sekvenční soubor
* přetoková oblast

#### Indexovaný soubor
* B-strom (hierarchická struktura)
* lineární (tabulková) struktura

#### Hašovaný soubor
- soubor s přímým přístupem
- klíčová je doba přístupu

## Koncepty a rozhraní souborových systémů
### Souborový systém
* soubor služeb sloužících k přístupu k vnější paměti
* sjednocuje pohled na paměť
* zajišťuje soukromí, autorizaci a bezpečnost

### File control block
* obsahuje charakteristiku souboru (metadata)
* na vnější paměti

**logický soubor**, **fyzický soubor**

### Správa otevřených souborů
* ukazatel na právě zpřístupňovaný záznam
* čítač otevření
* přístupová práva

## Implementace souborových systémů

## Sekvenční soubory

## Indexy, index-sekvenční a indexové organizace souboru

## Hašování
* konstantní složitost pro nalezení prvku O(1)
* hashovací funkce `m = h(k)`
    * `m` ... cílová adresa
    * `h` ... hashovací funkce
    * `k` ... klíč záznamu
* na cílové adrese jsou ukazatele na data nebo se jedná pří o umístění souboru

**perfektní hašování** -- funkce `h` je prostá

### Hašovací funkce
* deterministická
* rychlá (konstantní)
* umisťuje souboru rovnoměrně

### Otevřené hašování - řešení kolizí
* lineární adresování (při mazání si musím poznačit, že na onom místě něco bylo)
* kvadratické adresování
* dvojté adresování

### Uzavřené hašování
* adresace s kapsami

### Dynamické hašování
* rozšiřitelné hašování
* tries

## Hierarchické indexy, B/B+stromy, tries
